import json

def chaveOrd(r):
    return r["rua"]["meta"]["nome"]

dataset = open("ruas.json")

data = json.load(dataset)

dataset.close()

data.sort(key = chaveOrd)

preHTML = """
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <title>Ruas da Cidade de Braga</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="w3.css">
        <title>Document</title>
    </head>

    <body class="w3-dark-grey">

        <div class="w3-card-4">

            <header class="w3-container w3-blue-grey">
                <h3>Ruas da Cidade de Braga</h3>
            </header>

            <div class="w3-container">
                <ul class="w3-ul w3-card-4 w3-margin" style="width:50%">
    """

posHTML = """
                </ul>
            </div>

            <footer class="w3-container w3-blue-grey">
                <h5>Generated by RCBApp::EngWeb2024::A100695</h5>
            </footer>

        </div>

    </body>

    </html>
"""

content = ""

for r in data:
    nome = r["rua"]["meta"]["nome"]
    nome_sem_espacos = nome.replace(" ", "_")

    content += f"""
    <li>
         <a href="rua_{nome_sem_espacos}.html">{nome}</a>
    </li>
    """

pageHTML = preHTML + content + posHTML

f = open('./ruaSite/index.html', 'w')
f.write(pageHTML)
f.close()
